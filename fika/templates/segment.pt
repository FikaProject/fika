<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="view.main_macro"
      i18n:domain="fika">
<body>

<div metal:fill-slot="content">
	
	<div class="panel panel-default">
	    <div class="panel-heading">
	        <h4 class="panel-title">
	        	${context.title}
	        </h4>
	    </div>
	    <div class="panel-body">
	        
        	<div class="course_segment description">
            	${context.get_field_value('description')}
        	</div>
            
            <div class="btn-group btn-group-lg">
	            <tal:iterate repeat="media_object context.values()">
					<button type="button" class="btn btn-default collapser fika-media-button" data-toggle="collapse" data-parent="#accordion-${context.uid}" href="#collapse-${media_object.uid}">
        				<span class="glyphicon glyphicon-${media_object.icon}"></span>
        			</button>
			    </tal:iterate>
            </div>
            
            <div class="btn-group" tal:condition="len(view.addable_types) > 0" >
		      <button type="button" class="btn btn-default btn-lg dropdown-toggle glyphicon glyphicon-plus" data-toggle="dropdown">
		        <span i18n:translate="">Add</span> <span class="caret"></span>
		      </button>
		      <ul class="dropdown-menu" role="menu">
		        <tal:iterate repeat="type view.addable_types">
		            <li><a href="${request.resource_url(context, 'add', query = {'content_type': type})}">${type}</a></li>
		        </tal:iterate>
		      </ul>
		    </div>
		    
            <div class="panel-group" id="accordion-${context.uid}">
	            <tal:iterate repeat="media_object context.values()">
	            	<div class="panel fika-media-panel">
			            <div id="collapse-${media_object.uid}" class="panel-collapse collapse">
			            	<div class="btn-group">
								<a href="${request.resource_url(media_object, 'edit')}"><button type="button" class="btn btn-default">Edit</button></a>
								<a href="${request.resource_url(media_object, 'delete')}"><button type="button" class="btn btn-default">Delete</button></a>
							</div>
					
				        	<tal:form  replace="structure media_object.render(request, view)" ></tal:form>
				        </div>
			        </div>
			    </tal:iterate>
		    </div>
	    </div>
	</div>

</div>


</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="view.macro('arche:templates/base_view.pt')"
      i18n:domain="fika">
<body>
<div metal:fill-slot="main-content">
<div class="jumbotron media">
  <div class="row">
      <div class="col-sm-9">
          <h1 class="media-heading">${context.title}</h1>
          <div tal:content="structure context.description">Description</div>
          <p>
              <a tal:condition="not in_course"
                  href="${request.resource_url(context, 'join')}"
                  class="btn btn-primary btn-lg" role="button">
                <span class="glyphicon glyphicon-bookmark"></span>
                <span i18n:translate="">Enroll</span>
              </a>
              <a tal:condition="in_course"
                  href="${request.resource_url(context, 'leave')}"
                  class="btn btn-success btn-lg" role="button">
                <span class="glyphicon glyphicon-ok"></span>
                <span i18n:translate="">Enrolled</span>
              </a>
          </p>
      </div>
      <div class="col-sm-3">
          <img tal:replace="structure view.thumb_tag(context, 'col-3', extra_cls = 'media-object')" />
      </div>
  </div>
</div>

<div metal:fill-slot="content">
	<div class="row">
		<div class="col-md-4">
			<div class="panel panel-default">
				<div class="panel-heading">Contents</div>
				<div class="list-group">
					<tal:iterate repeat="coursemodule context.values()">
						<a class="list-group-item" href="${request.resource_url(coursemodule)}">
							<span tal:condition="coursemodule.uid in view.profile.completed_course_modules"
							    class="label label-success">
								<span class="glyphicon glyphicon-ok-sign"></span> ${repeat.coursemodule.number}
							</span>
							<span tal:condition="not coursemodule.uid in view.profile.completed_course_modules"
							    class="label label-default">
								<span class="glyphicon glyphicon-unchecked"></span> ${repeat.coursemodule.number}
							</span>
							&nbsp;<span tal:content="coursemodule.title">Title</span>
							
							<div tal:repeat="(icon, count) course_modules_media[coursemodule.uid].items()" class="pull-right">
								<span class="badge">
									<span class="glyphicon glyphicon-${icon}"></span>
									${count}
								</span>
							</div>
						</a>
					</tal:iterate>
					
					<a class="list-group-item" href="${request.resource_url(context, 'add', query = {'content_type': 'CourseModule'})}">
			          <span class=" text-muted">
			          	<span class="glyphicon glyphicon-plus"></span> Add new module
			          </span> 
			        </a>
				</div>
			</div>
		</div>
		<div class="col-md-8">
			<tal:form  replace="structure context.introduction"></tal:form>
		</div>
	</div>

    <p></p>
    
    <span tal:condition="in_course" tal:content="structure course_pagination(context, request, view)">
        (course pagination here)
    </span>
</div>
</div><!-- main-column -->
</body>
</html>
